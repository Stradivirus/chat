{"ast":null,"code":"import React,{useState,useCallback}from'react';import{ThemeProvider,useTheme}from'./contexts/ThemeContext';import ChatPage from'./pages/ChatPage';import AuthModal from'./components/AuthModal';import useWebSocket from'./hooks/useWebSocket';import'./styles/base.css';import'./styles/components.css';import'./styles/utilities.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AppContent(){const[showAuthModal,setShowAuthModal]=useState(false);const[authType,setAuthType]=useState(null);const{isDarkMode,toggleTheme}=useTheme();const[user,setUser]=useState(null);const[showSessionExpiredModal,setShowSessionExpiredModal]=useState(false);const{userCount,chatBanTimeLeft,isConnecting}=useWebSocket(user);const handleAuthButton=type=>{setAuthType(type);setShowAuthModal(true);};const handleCloseModal=()=>{setShowAuthModal(false);setAuthType(null);};const handleLoginSuccess=useCallback(userData=>{console.log('Login successful:',userData);setUser(userData);handleCloseModal();},[]);const handleLogout=()=>{setUser(null);};const handleSessionExpired=()=>{setShowSessionExpiredModal(false);handleLogout();};return/*#__PURE__*/_jsxs(\"div\",{className:`App ${isDarkMode?'dark-mode':'light-mode'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-section\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"main-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uCC44\\uD305 \\uC560\\uD50C\\uB9AC\\uCF00\\uC774\\uC158\"})}),/*#__PURE__*/_jsx(\"main\",{className:\"main-content\"})]}),/*#__PURE__*/_jsxs(\"aside\",{className:\"side-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"side-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-count\",children:[\"\\uD604\\uC7AC \\uC811\\uC18D\\uC790 \\uC218: \",userCount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-buttons\",children:[user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"user-nickname\",children:[user.username,\"\\uB2D8 \\uD658\\uC601\\uD569\\uB2C8\\uB2E4\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAuthButton('login'),children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAuthButton('register'),children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleTheme,className:\"theme-toggle\",children:isDarkMode?'라이트':'다크'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"connection-status\",children:isConnecting?'연결 중...':user?'연결됨':'연결 끊김'}),/*#__PURE__*/_jsx(ChatPage,{user:user,chatBanTimeLeft:chatBanTimeLeft})]}),showAuthModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",children:/*#__PURE__*/_jsx(AuthModal,{type:authType,onClose:handleCloseModal,onLoginSuccess:handleLoginSuccess})}),showSessionExpiredModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"session-expired-modal\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uB2E4\\uB978 \\uAE30\\uAE30\\uC5D0\\uC11C \\uB85C\\uADF8\\uC778\\uB418\\uC5B4 \\uB85C\\uADF8\\uC544\\uC6C3 \\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSessionExpired,children:\"\\uD655\\uC778\"})]})})]});}function App(){return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useState","useCallback","ThemeProvider","useTheme","ChatPage","AuthModal","useWebSocket","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AppContent","showAuthModal","setShowAuthModal","authType","setAuthType","isDarkMode","toggleTheme","user","setUser","showSessionExpiredModal","setShowSessionExpiredModal","userCount","chatBanTimeLeft","isConnecting","handleAuthButton","type","handleCloseModal","handleLoginSuccess","userData","console","log","handleLogout","handleSessionExpired","className","children","username","onClick","onClose","onLoginSuccess","App"],"sources":["/home/work/chat/front/src/App.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { ThemeProvider, useTheme } from './contexts/ThemeContext';\nimport ChatPage from './pages/ChatPage';\nimport AuthModal from './components/AuthModal';\nimport useWebSocket from './hooks/useWebSocket';\nimport './styles/base.css';\nimport './styles/components.css';\nimport './styles/utilities.css';\n\nfunction AppContent() {\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [authType, setAuthType] = useState(null);\n  const { isDarkMode, toggleTheme } = useTheme();\n  const [user, setUser] = useState(null);\n  const [showSessionExpiredModal, setShowSessionExpiredModal] = useState(false);\n\n  const { userCount, chatBanTimeLeft, isConnecting } = useWebSocket(user);\n\n  const handleAuthButton = (type) => {\n    setAuthType(type);\n    setShowAuthModal(true);\n  };\n\n  const handleCloseModal = () => {\n    setShowAuthModal(false);\n    setAuthType(null);\n  };\n\n  const handleLoginSuccess = useCallback((userData) => {\n    console.log('Login successful:', userData);\n    setUser(userData);\n    handleCloseModal();\n  }, []);\n\n  const handleLogout = () => {\n    setUser(null);\n  };\n\n  const handleSessionExpired = () => {\n    setShowSessionExpiredModal(false);\n    handleLogout();\n  };\n\n  return (\n    <div className={`App ${isDarkMode ? 'dark-mode' : 'light-mode'}`}>\n      <div className=\"main-section\">\n        <header className=\"main-header\">\n          <h1>채팅 애플리케이션</h1>\n        </header>\n        <main className=\"main-content\">\n          {/* 메인 콘텐츠 */}\n        </main>\n      </div>\n      <aside className=\"side-container\">\n        <header className=\"side-header\">\n          <div className=\"user-count\">현재 접속자 수: {userCount}</div>\n          <div className=\"header-buttons\">\n            {user ? (\n              <>\n                <span className=\"user-nickname\">{user.username}님 환영합니다</span>\n                <button onClick={handleLogout} className=\"logout-button\">로그아웃</button>\n              </>\n            ) : (\n              <>\n                <button onClick={() => handleAuthButton('login')}>로그인</button>\n                <button onClick={() => handleAuthButton('register')}>회원가입</button>\n              </>\n            )}\n            <button onClick={toggleTheme} className=\"theme-toggle\">\n              {isDarkMode ? '라이트' : '다크'}\n            </button>\n          </div>\n        </header>\n        <div className=\"connection-status\">\n          {isConnecting ? '연결 중...' : (user ? '연결됨' : '연결 끊김')}\n        </div>\n        <ChatPage \n          user={user} \n          chatBanTimeLeft={chatBanTimeLeft} \n        />\n      </aside>\n      {showAuthModal && (\n        <div className=\"modal-backdrop\">\n          <AuthModal \n            type={authType} \n            onClose={handleCloseModal}\n            onLoginSuccess={handleLoginSuccess}\n          />\n        </div>\n      )}\n      {showSessionExpiredModal && (\n        <div className=\"modal-backdrop\">\n          <div className=\"session-expired-modal\">\n            <p>다른 기기에서 로그인되어 로그아웃 되었습니다.</p>\n            <button onClick={handleSessionExpired}>확인</button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <ThemeProvider>\n      <AppContent />\n    </ThemeProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}