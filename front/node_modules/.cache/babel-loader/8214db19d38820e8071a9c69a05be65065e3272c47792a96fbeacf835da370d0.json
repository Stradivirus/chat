{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ChatInput(_ref){let{onSendMessage,isLoggedIn,chatBanTimeLeft}=_ref;// 메시지 입력 상태 관리\nconst[message,setMessage]=useState('');// 전송 버튼 비활성화 상태 관리\nconst[isButtonDisabled,setIsButtonDisabled]=useState(false);// chatBanTimeLeft가 변경될 때마다 실행되는 효과\nuseEffect(()=>{// 채팅 금지 시간이 남아있으면 버튼 비활성화\nif(chatBanTimeLeft>0){setIsButtonDisabled(true);}else{setIsButtonDisabled(false);}},[chatBanTimeLeft]);// 폼 제출 핸들러\nconst handleSubmit=e=>{e.preventDefault();// 메시지가 있고, 30자 이하이며, 로그인 상태이고, 채팅 금지 상태가 아닐 때만 전송\nif(message.trim()&&message.length<=30&&isLoggedIn&&chatBanTimeLeft===0){onSendMessage(message);setMessage('');// 메시지 입력창 초기화\nsetIsButtonDisabled(true);// 버튼 일시적 비활성화\n// 0.5초 후 버튼 다시 활성화 (연속 전송 방지)\nsetTimeout(()=>setIsButtonDisabled(false),500);}};// 입력 변경 핸들러\nconst handleChange=e=>{const input=e.target.value;// 30자 이하일 때만 입력 허용\nif(input.length<=30){setMessage(input);}};return/*#__PURE__*/_jsxs(\"form\",{className:\"chat-input\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:handleChange// 로그인 상태와 채팅 금지 상태에 따라 다른 플레이스홀더 표시\n,placeholder:isLoggedIn?chatBanTimeLeft>0?`채팅 금지: ${chatBanTimeLeft}초 남음`:\"메시지를 입력하세요 (최대 30자)\":\"\",maxLength:30// 로그인 상태가 아니거나 채팅 금지 상태일 때 입력 비활성화\n,disabled:!isLoggedIn||chatBanTimeLeft>0// 채팅 금지 상태일 때 추가 스타일 적용\n,className:chatBanTimeLeft>0?\"chat-banned\":\"\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\"// 버튼 비활성화 조건: 버튼 비활성화 상태이거나 로그인하지 않았거나 채팅 금지 상태일 때\n,disabled:isButtonDisabled||!isLoggedIn||chatBanTimeLeft>0,children:isLoggedIn?chatBanTimeLeft>0?`${chatBanTimeLeft}초`:\"전송\":\"로그인 해주세요\"})]});}export default ChatInput;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","ChatInput","_ref","onSendMessage","isLoggedIn","chatBanTimeLeft","message","setMessage","isButtonDisabled","setIsButtonDisabled","handleSubmit","e","preventDefault","trim","length","setTimeout","handleChange","input","target","value","className","onSubmit","children","type","onChange","placeholder","maxLength","disabled"],"sources":["/home/work/chat/front/src/components/ChatInput.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction ChatInput({ onSendMessage, isLoggedIn, chatBanTimeLeft }) {\n  // 메시지 입력 상태 관리\n  const [message, setMessage] = useState('');\n  // 전송 버튼 비활성화 상태 관리\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false);\n\n  // chatBanTimeLeft가 변경될 때마다 실행되는 효과\n  useEffect(() => {\n    // 채팅 금지 시간이 남아있으면 버튼 비활성화\n    if (chatBanTimeLeft > 0) {\n      setIsButtonDisabled(true);\n    } else {\n      setIsButtonDisabled(false);\n    }\n  }, [chatBanTimeLeft]);\n\n  // 폼 제출 핸들러\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // 메시지가 있고, 30자 이하이며, 로그인 상태이고, 채팅 금지 상태가 아닐 때만 전송\n    if (message.trim() && message.length <= 30 && isLoggedIn && chatBanTimeLeft === 0) {\n      onSendMessage(message);\n      setMessage(''); // 메시지 입력창 초기화\n      setIsButtonDisabled(true); // 버튼 일시적 비활성화\n      // 0.5초 후 버튼 다시 활성화 (연속 전송 방지)\n      setTimeout(() => setIsButtonDisabled(false), 500);\n    }\n  };\n\n  // 입력 변경 핸들러\n  const handleChange = (e) => {\n    const input = e.target.value;\n    // 30자 이하일 때만 입력 허용\n    if (input.length <= 30) {\n      setMessage(input);\n    }\n  };\n\n  return (\n    <form className=\"chat-input\" onSubmit={handleSubmit}>\n      <input\n        type=\"text\"\n        value={message}\n        onChange={handleChange}\n        // 로그인 상태와 채팅 금지 상태에 따라 다른 플레이스홀더 표시\n        placeholder={isLoggedIn ? (chatBanTimeLeft > 0 ? `채팅 금지: ${chatBanTimeLeft}초 남음` : \"메시지를 입력하세요 (최대 30자)\") : \"\"}\n        maxLength={30}\n        // 로그인 상태가 아니거나 채팅 금지 상태일 때 입력 비활성화\n        disabled={!isLoggedIn || chatBanTimeLeft > 0}\n        // 채팅 금지 상태일 때 추가 스타일 적용\n        className={chatBanTimeLeft > 0 ? \"chat-banned\" : \"\"}\n      />\n      <button \n        type=\"submit\" \n        // 버튼 비활성화 조건: 버튼 비활성화 상태이거나 로그인하지 않았거나 채팅 금지 상태일 때\n        disabled={isButtonDisabled || !isLoggedIn || chatBanTimeLeft > 0}\n      >\n        {/* 로그인 상태와 채팅 금지 상태에 따라 다른 버튼 텍스트 표시 */}\n        {isLoggedIn ? (chatBanTimeLeft > 0 ? `${chatBanTimeLeft}초` : \"전송\") : \"로그인 해주세요\"}\n      </button>\n    </form>\n  );\n}\n\nexport default ChatInput;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAiD,IAAhD,CAAEC,aAAa,CAAEC,UAAU,CAAEC,eAAgB,CAAC,CAAAH,IAAA,CAC/D;AACA,KAAM,CAACI,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC1C;AACA,KAAM,CAACa,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAE/D;AACAC,SAAS,CAAC,IAAM,CACd;AACA,GAAIS,eAAe,CAAG,CAAC,CAAE,CACvBI,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAC,IAAM,CACLA,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CAAE,CAACJ,eAAe,CAAC,CAAC,CAErB;AACA,KAAM,CAAAK,YAAY,CAAIC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB;AACA,GAAIN,OAAO,CAACO,IAAI,CAAC,CAAC,EAAIP,OAAO,CAACQ,MAAM,EAAI,EAAE,EAAIV,UAAU,EAAIC,eAAe,GAAK,CAAC,CAAE,CACjFF,aAAa,CAACG,OAAO,CAAC,CACtBC,UAAU,CAAC,EAAE,CAAC,CAAE;AAChBE,mBAAmB,CAAC,IAAI,CAAC,CAAE;AAC3B;AACAM,UAAU,CAAC,IAAMN,mBAAmB,CAAC,KAAK,CAAC,CAAE,GAAG,CAAC,CACnD,CACF,CAAC,CAED;AACA,KAAM,CAAAO,YAAY,CAAIL,CAAC,EAAK,CAC1B,KAAM,CAAAM,KAAK,CAAGN,CAAC,CAACO,MAAM,CAACC,KAAK,CAC5B;AACA,GAAIF,KAAK,CAACH,MAAM,EAAI,EAAE,CAAE,CACtBP,UAAU,CAACU,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEjB,KAAA,SAAMoB,SAAS,CAAC,YAAY,CAACC,QAAQ,CAAEX,YAAa,CAAAY,QAAA,eAClDxB,IAAA,UACEyB,IAAI,CAAC,MAAM,CACXJ,KAAK,CAAEb,OAAQ,CACfkB,QAAQ,CAAER,YACV;AAAA,CACAS,WAAW,CAAErB,UAAU,CAAIC,eAAe,CAAG,CAAC,CAAG,UAAUA,eAAe,MAAM,CAAG,qBAAqB,CAAI,EAAG,CAC/GqB,SAAS,CAAE,EACX;AAAA,CACAC,QAAQ,CAAE,CAACvB,UAAU,EAAIC,eAAe,CAAG,CAC3C;AAAA,CACAe,SAAS,CAAEf,eAAe,CAAG,CAAC,CAAG,aAAa,CAAG,EAAG,CACrD,CAAC,cACFP,IAAA,WACEyB,IAAI,CAAC,QACL;AAAA,CACAI,QAAQ,CAAEnB,gBAAgB,EAAI,CAACJ,UAAU,EAAIC,eAAe,CAAG,CAAE,CAAAiB,QAAA,CAGhElB,UAAU,CAAIC,eAAe,CAAG,CAAC,CAAG,GAAGA,eAAe,GAAG,CAAG,IAAI,CAAI,UAAU,CACzE,CAAC,EACL,CAAC,CAEX,CAEA,cAAe,CAAAJ,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}