{"ast":null,"code":"import React,{useState}from'react';// 추가된 부분: testUsers 관련 함수 가져오기\nimport{findUser,addUser}from'../utils/testUsers';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function AuthModal(_ref){let{type,onClose}=_ref;const[email,setEmail]=useState('');const[username,setUsername]=useState('');const[nickname,setNickname]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[errors,setErrors]=useState({});// 추가된 부분: 결과 메시지 상태\nconst[resultMessage,setResultMessage]=useState('');const validateForm=()=>{const newErrors={};if(type==='register'){if(!email||!/\\S+@\\S+\\.\\S+/.test(email)){newErrors.email='유효한 이메일 주소를 입력해주세요.';}if(!nickname||nickname.length<2){newErrors.nickname='닉네임은 2자 이상이어야 합니다.';}if(password!==confirmPassword){newErrors.confirmPassword='비밀번호가 일치하지 않습니다.';}}if(!username||username.length<4){newErrors.username='아이디는 4자 이상이어야 합니다.';}if(!password||password.length<8){newErrors.password='비밀번호는 8자 이상이어야 합니다.';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=e=>{e.preventDefault();if(validateForm()){// 변경된 부분: 테스트용 인증 로직\nif(type==='login'){const user=findUser(username,password);if(user){setResultMessage('로그인 성공!');setTimeout(()=>{onClose();// 여기에 로그인 성공 후 추가 작업을 할 수 있습니다.\n},1500);}else{setResultMessage('로그인 실패. 아이디 또는 비밀번호를 확인해주세요.');}}else{const newUser={email,username,nickname,password};const addedUser=addUser(newUser);if(addedUser){setResultMessage('회원가입 성공!');setTimeout(()=>{onClose();// 여기에 회원가입 성공 후 추가 작업을 할 수 있습니다.\n},1500);}else{setResultMessage('회원가입 실패. 이미 존재하는 사용자일 수 있습니다.');}}}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-modal\",children:[/*#__PURE__*/_jsx(\"h2\",{children:type==='login'?'로그인':'회원가입'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[type==='login'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC544\\uC774\\uB514\",value:username,onChange:e=>setUsername(e.target.value),required:true}),errors.username&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.username}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",value:password,onChange:e=>setPassword(e.target.value),required:true}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.password})]}),type==='register'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"\\uC774\\uBA54\\uC77C\",value:email,onChange:e=>setEmail(e.target.value),required:true}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.email}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC544\\uC774\\uB514\",value:username,onChange:e=>setUsername(e.target.value),required:true}),errors.username&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.username}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uB2C9\\uB124\\uC784\",value:nickname,onChange:e=>setNickname(e.target.value),required:true}),errors.nickname&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.nickname}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",value:password,onChange:e=>setPassword(e.target.value),required:true}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.password}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.confirmPassword})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:type==='login'?'로그인':'회원가입'})]}),resultMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"result-message\",children:resultMessage}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"close-button\",children:\"\\uB2EB\\uAE30\"})]})});}export default AuthModal;","map":{"version":3,"names":["React","useState","findUser","addUser","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AuthModal","_ref","type","onClose","email","setEmail","username","setUsername","nickname","setNickname","password","setPassword","confirmPassword","setConfirmPassword","errors","setErrors","resultMessage","setResultMessage","validateForm","newErrors","test","length","Object","keys","handleSubmit","e","preventDefault","user","setTimeout","newUser","addedUser","className","children","onSubmit","placeholder","value","onChange","target","required","onClick"],"sources":["/home/work/chat/front/src/components/AuthModal.js"],"sourcesContent":["import React, { useState } from 'react';\n// 추가된 부분: testUsers 관련 함수 가져오기\nimport { findUser, addUser } from '../utils/testUsers';\n\nfunction AuthModal({ type, onClose }) {\n  const [email, setEmail] = useState('');\n  const [username, setUsername] = useState('');\n  const [nickname, setNickname] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [errors, setErrors] = useState({});\n  // 추가된 부분: 결과 메시지 상태\n  const [resultMessage, setResultMessage] = useState('');\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (type === 'register') {\n      if (!email || !/\\S+@\\S+\\.\\S+/.test(email)) {\n        newErrors.email = '유효한 이메일 주소를 입력해주세요.';\n      }\n      if (!nickname || nickname.length < 2) {\n        newErrors.nickname = '닉네임은 2자 이상이어야 합니다.';\n      }\n      if (password !== confirmPassword) {\n        newErrors.confirmPassword = '비밀번호가 일치하지 않습니다.';\n      }\n    }\n\n    if (!username || username.length < 4) {\n      newErrors.username = '아이디는 4자 이상이어야 합니다.';\n    }\n    if (!password || password.length < 8) {\n      newErrors.password = '비밀번호는 8자 이상이어야 합니다.';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (validateForm()) {\n      // 변경된 부분: 테스트용 인증 로직\n      if (type === 'login') {\n        const user = findUser(username, password);\n        if (user) {\n          setResultMessage('로그인 성공!');\n          setTimeout(() => {\n            onClose();\n            // 여기에 로그인 성공 후 추가 작업을 할 수 있습니다.\n          }, 1500);\n        } else {\n          setResultMessage('로그인 실패. 아이디 또는 비밀번호를 확인해주세요.');\n        }\n      } else {\n        const newUser = { email, username, nickname, password };\n        const addedUser = addUser(newUser);\n        if (addedUser) {\n          setResultMessage('회원가입 성공!');\n          setTimeout(() => {\n            onClose();\n            // 여기에 회원가입 성공 후 추가 작업을 할 수 있습니다.\n          }, 1500);\n        } else {\n          setResultMessage('회원가입 실패. 이미 존재하는 사용자일 수 있습니다.');\n        }\n      }\n    }\n  };\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"auth-modal\">\n        <h2>{type === 'login' ? '로그인' : '회원가입'}</h2>\n        <form onSubmit={handleSubmit}>\n          {type === 'login' && (\n            <>\n              <input\n                type=\"text\"\n                placeholder=\"아이디\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                required\n              />\n              {errors.username && <p className=\"error\">{errors.username}</p>}\n              <input\n                type=\"password\"\n                placeholder=\"비밀번호\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n              />\n              {errors.password && <p className=\"error\">{errors.password}</p>}\n            </>\n          )}\n          {type === 'register' && (\n            <>\n              <input\n                type=\"email\"\n                placeholder=\"이메일\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n              />\n              {errors.email && <p className=\"error\">{errors.email}</p>}\n              <input\n                type=\"text\"\n                placeholder=\"아이디\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                required\n              />\n              {errors.username && <p className=\"error\">{errors.username}</p>}\n              <input\n                type=\"text\"\n                placeholder=\"닉네임\"\n                value={nickname}\n                onChange={(e) => setNickname(e.target.value)}\n                required\n              />\n              {errors.nickname && <p className=\"error\">{errors.nickname}</p>}\n              <input\n                type=\"password\"\n                placeholder=\"비밀번호\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n              />\n              {errors.password && <p className=\"error\">{errors.password}</p>}\n              <input\n                type=\"password\"\n                placeholder=\"비밀번호 확인\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                required\n              />\n              {errors.confirmPassword && <p className=\"error\">{errors.confirmPassword}</p>}\n            </>\n          )}\n          <button type=\"submit\">{type === 'login' ? '로그인' : '회원가입'}</button>\n        </form>\n        {/* 추가된 부분: 결과 메시지 표시 */}\n        {resultMessage && <p className=\"result-message\">{resultMessage}</p>}\n        <button onClick={onClose} className=\"close-button\">닫기</button>\n      </div>\n    </div>\n  );\n}\n\nexport default AuthModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}